jQuery(document).ready(function(){new UnitSwitcherDropdown});var UnitSwitcherDropdown=function(){var t=this,n=jQuery;return t.dropdown="",t.bindEvents=function(){n(document).on("click","[data-unit-dropdown]",function(o){o.preventDefault(),t.dropdown=n(this).parents(".dropdown"),t.toggleDropdown()}),n(document).on("click",function(n){t.closeDropdowns(n.target)})},t.init=function(){t.bindEvents()},t.toggleDropdown=function(){n(t.dropdown).find(".dropdown-menu");return n(t.dropdown).hasClass("active")?void n(t.dropdown).removeClass("active"):(n(".dropdown").removeClass("active"),void n(t.dropdown).addClass("active"))},t.closeDropdowns=function(t){0===n(t).parents(".dropdown").length&&n(".dropdown").removeClass("active")},t.init()};jQuery(function(t){function n(){t.ajax({url:unit_switcher.ajaxurl,type:"post",datatype:"json",data:{action:"unitswitchernonce"},success:function(t){o(t.nonce)}})}function o(n){var o='<script type="text/javascript"> var unit_switcher_nonce = "'+n+'" ;</script>';t("head").append(o)}function a(n){var o=t(n).attr("data-parentunit"),a=t(n).attr("data-alternate"),e=t('*[data-unit="'+o+'"]');t.each(e,function(){var n=t(this).siblings("ul").find('*[data-alternate="'+a+'"]'),o=t(n).attr("data-unitvalue");t(this).find(".unit-switcher-value").text(o+" "+a)}),t(".unit-switcher-switch").removeClass("open"),i(o,a)}function i(n,o){t.ajax({url:unit_switcher.ajaxurl,type:"post",datatype:"json",data:{action:"unitswitcher",parent_unit:n,selected_unit:o,nonce:unit_switcher_nonce}})}function e(){var n=t("*[data-unit-dropdown]"),o=[];t.each(n,function(n){o[n]={id:n,value:t(this).data("value"),unit:t(this).data("unit"),round:t(this).data("round")}}),r(o)}function r(n){t.ajax({url:unit_switcher.ajaxurl,type:"post",datatype:"json",data:{action:"unitswitcher_dropdowns",dropdowns:n},success:function(t){console.log(t)}})}t(document).ready(function(){n()}),t(document).on("click","*[data-unitswitcher]",function(n){n.preventDefault(),a(t(this))}),t(document).ready(function(){"1"===unit_switcher.cache&&e()})});